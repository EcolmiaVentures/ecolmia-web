<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ECOLMIA · Propiedades por ciudad</title>
<link href="assets/styles.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
<header>
  <div class="container wrap">
    <div style="font-weight:800">ECOLMIA VENTURES</div>
    <nav>
      <a href="index.html">Inicio</a>
      <a href="city.html?city=CDMX">CDMX</a>
      <a href="city.html?city=Acapulco">Acapulco</a>
    </nav>
  </div>
</header>
<section class="hero">
  <div class="container">
    <h1 id="title">Propiedades</h1>
    <p class="muted" id="subtitle">Selecciona la propiedad para ver detalles y reservar</p>
  </div>
</section>
<section>
  <div class="container" id="cards" style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px"></div>
</section>
<footer>
  <div class="container">
    <small>© <span id="year"></span> ECOLMIA VENTURES CLC S.A.S. de C.V.</small>
  </div>
</footer>
<script>document.getElementById('year').textContent=new Date().getFullYear();</script>
<script>
(async function(){
  const city = new URL(location.href).searchParams.get('city') || 'CDMX';
  document.getElementById('title').textContent = 'Propiedades en ' + city;
  const props = await (await fetch('data/properties.json')).json();
  const list = [];
  for (const [id,p] of Object.entries(props.properties)) {
    if (p.city.toLowerCase() === city.toLowerCase()) list.push({id, ...p});
  }
  const cards = document.getElementById('cards');
  if (!list.length) { cards.innerHTML = "<p class='muted'>No hay propiedades en esta ciudad.</p>"; return; }
  list.forEach(p=>{
    const card = document.createElement('a');
    card.className = 'card';
    card.href = 'property.html?id=' + p.id;
    const h = document.createElement('h3'); h.textContent = p.name + ' · ' + p.city;
    const m = document.createElement('p'); m.className = 'muted'; m.textContent = Object.keys(p.rooms).join(' · ');
    card.appendChild(h); card.appendChild(m); cards.appendChild(card);
  });
})();
</script>
</body>
</html>
